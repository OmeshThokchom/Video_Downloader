<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quantum Video Downloader</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="static/css/style.css">
    <link rel="icon" type="image/x-icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üé¨</text></svg>">
</head>
<body class="bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 min-h-screen overflow-x-hidden">
    <!-- Particle Background -->
    <canvas id="particleCanvas" class="fixed inset-0 pointer-events-none"></canvas>
    
    <!-- Main Content -->
    <div class="relative z-10 container mx-auto px-4 py-8">
        <!-- Header -->
        <header class="text-center mb-12">
            <h1 class="text-6xl font-bold bg-gradient-to-r from-cyan-400 via-blue-500 to-purple-600 bg-clip-text text-transparent mb-4 animate-pulse">
                Quantum Video Downloader
            </h1>
            <p class="text-xl text-gray-300 mb-8 animate-fade-in">
                Download videos from any source with quantum precision
            </p>
            <div class="flex justify-center space-x-4 mb-8">
                <a href="https://github.com/yourusername/Video_Downloader" target="_blank" class="github-link">
                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24">
                        <path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/>
                    </svg>
                    <span>GitHub</span>
                </a>
            </div>
        </header>

        <!-- Search Section -->
        <div class="max-w-4xl mx-auto">
            <div class="glass-card p-8 mb-8">
                <div class="flex flex-col md:flex-row gap-4">
                    <input 
                        type="url" 
                        id="videoUrl" 
                        placeholder="Paste video URL here..." 
                        class="flex-1 px-6 py-4 bg-white/10 border border-white/20 rounded-xl text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-cyan-400 focus:border-transparent backdrop-blur-sm"
                    >
                    <button 
                        id="searchBtn" 
                        class="px-8 py-4 bg-gradient-to-r from-cyan-500 to-blue-600 hover:from-cyan-600 hover:to-blue-700 text-white font-semibold rounded-xl transition-all duration-300 transform hover:scale-105 focus:outline-none focus:ring-2 focus:ring-cyan-400"
                    >
                        <span class="flex items-center justify-center">
                            <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
                            </svg>
                            Search Video
                        </span>
                    </button>
                </div>
            </div>

            <!-- Loading Spinner -->
            <div id="loadingSpinner" class="hidden text-center py-12">
                <div class="inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-cyan-400"></div>
                <p class="text-gray-300 mt-4">Analyzing video...</p>
            </div>

            <!-- Results Section -->
            <div id="results" class="hidden">
                <!-- Video Info -->
                <div class="glass-card p-8 mb-8">
                    <div class="grid md:grid-cols-2 gap-8">
                        <!-- Thumbnail -->
                        <div class="space-y-4">
                            <img id="videoThumbnail" src="" alt="Video thumbnail" class="w-full rounded-xl shadow-2xl">
                            <div class="text-center">
                                <h3 id="videoTitle" class="text-xl font-semibold text-white mb-2"></h3>
                                <p id="videoDuration" class="text-gray-300"></p>
                                <p id="videoUploader" class="text-gray-400"></p>
                            </div>
                        </div>

                        <!-- Download Options -->
                        <div class="space-y-6">
                            <!-- Video Formats -->
                            <div>
                                <h4 class="text-lg font-semibold text-white mb-4 flex items-center">
                                    <svg class="w-5 h-5 mr-2 text-cyan-400" fill="currentColor" viewBox="0 0 20 20">
                                        <path d="M2 6a2 2 0 012-2h6l2 2h6a2 2 0 012 2v6a2 2 0 01-2 2H4a2 2 0 01-2-2V6z"></path>
                                    </svg>
                                    Video Formats
                                </h4>
                                <div id="videoFormats" class="space-y-3"></div>
                            </div>

                            <!-- Audio Formats -->
                            <div>
                                <h4 class="text-lg font-semibold text-white mb-4 flex items-center">
                                    <svg class="w-5 h-5 mr-2 text-purple-400" fill="currentColor" viewBox="0 0 20 20">
                                        <path d="M18 3a1 1 0 00-1.196-.98l-10 2A1 1 0 006 5v9.114A4.369 4.369 0 005 14c-1.657 0-3 .895-3 2s1.343 2 3 2 3-.895 3-2V7.82l8-1.6v5.894A4.369 4.369 0 0015 12c-1.657 0-3 .895-3 2s1.343 2 3 2 3-.895 3-2V3z"></path>
                                    </svg>
                                    Audio Formats
                                </h4>
                                <div id="audioFormats" class="space-y-3"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Download Modal -->
        <div id="downloadModal" class="fixed inset-0 bg-black/50 backdrop-blur-sm hidden z-50">
            <div class="flex items-center justify-center min-h-screen p-4">
                <div class="glass-card p-8 max-w-md w-full mx-4">
                    <div class="text-center">
                        <div class="animate-spin rounded-full h-12 w-12 border-b-2 border-cyan-400 mx-auto mb-4"></div>
                        <h3 class="text-xl font-semibold text-white mb-2">Downloading...</h3>
                        <p id="downloadStatus" class="text-gray-300 mb-4">Preparing download...</p>
                        
                        <!-- Progress Bar -->
                        <div class="w-full bg-gray-700 rounded-full h-2 mb-4">
                            <div id="downloadProgress" class="bg-gradient-to-r from-cyan-500 to-blue-600 h-2 rounded-full transition-all duration-300" style="width: 0%"></div>
                        </div>
                        
                        <p class="text-sm text-gray-400">Please wait while your file downloads...</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Error Modal -->
        <div id="errorModal" class="fixed inset-0 bg-black/50 backdrop-blur-sm hidden z-50">
            <div class="flex items-center justify-center min-h-screen p-4">
                <div class="glass-card p-8 max-w-md w-full mx-4">
                    <div class="text-center">
                        <div class="w-16 h-16 bg-red-500/20 rounded-full flex items-center justify-center mx-auto mb-4">
                            <svg class="w-8 h-8 text-red-400" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                        <h3 class="text-xl font-semibold text-white mb-2">Download Error</h3>
                        <p id="errorMessage" class="text-gray-300 mb-6"></p>
                        <button id="closeErrorBtn" class="px-6 py-3 bg-gray-600 hover:bg-gray-700 text-white rounded-lg transition-colors">
                            Close
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="relative z-10 text-center py-8 text-gray-400">
        <p>&copy; 2024 Quantum Video Downloader. Built with ‚ù§Ô∏è for the community.</p>
    </footer>

    <!-- Scripts -->
    <script src="static/js/particles.js"></script>
    <script>
        // GitHub Pages compatible version - no backend required
        class VideoDownloader {
            constructor() {
                this.currentUrl = '';
                this.init();
            }

            init() {
                this.bindEvents();
                this.initParticles();
                this.addInteractiveEffects();
            }

            bindEvents() {
                document.getElementById('searchBtn').addEventListener('click', () => this.searchVideo());
                document.getElementById('videoUrl').addEventListener('keypress', (e) => {
                    if (e.key === 'Enter') this.searchVideo();
                });
                document.getElementById('closeErrorBtn').addEventListener('click', () => this.hideError());
            }

            async searchVideo() {
                const url = document.getElementById('videoUrl').value.trim();
                if (!url) {
                    this.showError('Please enter a valid video URL');
                    return;
                }

                this.currentUrl = url;
                this.showLoading();
                this.hideResults();

                try {
                    // For GitHub Pages, we'll show a demo with sample data
                    // In a real implementation, you'd use a service like:
                    // - YouTube Data API
                    // - Invidious API
                    // - Or a serverless function
                    
                    await this.simulateVideoAnalysis();
                    this.showDemoResults();
                } catch (error) {
                    console.error('Search error:', error);
                    this.showError('Failed to analyze video. Please check the URL and try again.');
                } finally {
                    this.hideLoading();
                }
            }

            async simulateVideoAnalysis() {
                // Simulate network delay
                await new Promise(resolve => setTimeout(resolve, 2000));
            }

            showDemoResults() {
                const demoData = {
                    title: 'Sample Video - Quantum Technology Explained',
                    duration: '15:30',
                    uploader: 'Tech Channel',
                    thumbnail: 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDgwIiBoZWlnaHQ9IjM2MCIgdmlld0JveD0iMCAwIDQ4MCAzNjAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSI0ODAiIGhlaWdodD0iMzYwIiBmaWxsPSIjMzc0MTUxIi8+Cjx0ZXh0IHg9IjI0MCIgeT0iMTgwIiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMjQiIGZpbGw9IndoaXRlIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIj5TYW1wbGUgVmlkZW8gVGh1bWJuYWlsPC90ZXh0Pgo8L3N2Zz4K',
                    formats: [
                        { format_id: '18', quality: '360p', filesize: '45.2 MB', ext: 'mp4' },
                        { format_id: '22', quality: '720p', filesize: '89.7 MB', ext: 'mp4' },
                        { format_id: '137', quality: '1080p', filesize: '156.3 MB', ext: 'mp4' }
                    ],
                    audio_formats: [
                        { format_id: '140', quality: '128kbps', filesize: '12.8 MB', ext: 'm4a' },
                        { format_id: '251', quality: '160kbps', filesize: '16.2 MB', ext: 'webm' }
                    ]
                };

                this.displayResults(demoData);
            }

            displayResults(data) {
                // Set video info
                document.getElementById('videoTitle').textContent = data.title;
                document.getElementById('videoDuration').textContent = `Duration: ${data.duration}`;
                document.getElementById('videoUploader').textContent = `By: ${data.uploader}`;
                document.getElementById('videoThumbnail').src = data.thumbnail;

                // Display video formats
                const videoFormatsContainer = document.getElementById('videoFormats');
                videoFormatsContainer.innerHTML = '';
                data.formats.forEach(format => {
                    const formatElement = this.createFormatElement(format, 'video');
                    videoFormatsContainer.appendChild(formatElement);
                });

                // Display audio formats
                const audioFormatsContainer = document.getElementById('audioFormats');
                audioFormatsContainer.innerHTML = '';
                data.audio_formats.forEach(format => {
                    const formatElement = this.createFormatElement(format, 'audio');
                    audioFormatsContainer.appendChild(formatElement);
                });

                this.showResults();
            }

            createFormatElement(format, type) {
                const div = document.createElement('div');
                div.className = 'glass-card p-4 hover:bg-white/10 transition-colors cursor-pointer';
                div.innerHTML = `
                    <div class="flex justify-between items-center">
                        <div>
                            <div class="font-semibold text-white">${format.quality}</div>
                            <div class="text-sm text-gray-400">${format.ext.toUpperCase()} ‚Ä¢ ${format.filesize}</div>
                        </div>
                        <button class="download-btn px-4 py-2 bg-gradient-to-r from-cyan-500 to-blue-600 hover:from-cyan-600 hover:to-blue-700 text-white rounded-lg transition-all duration-300 transform hover:scale-105">
                            Download
                        </button>
                    </div>
                `;

                div.querySelector('.download-btn').addEventListener('click', () => {
                    this.downloadFormat(format.format_id, type, format);
                });

                return div;
            }

            async downloadFormat(formatId, type, format) {
                this.showDownloadModal(format);
                
                try {
                    // For GitHub Pages demo, show a message about backend requirement
                    await this.simulateDownloadProgress();
                    
                    setTimeout(() => {
                        this.hideDownloadModal();
                        this.showError('This is a demo version. For actual downloads, please run the Python backend locally or deploy to a server that supports Python.');
                    }, 3000);
                    
                } catch (error) {
                    console.error('Download error:', error);
                    this.showError('Download failed. Please try again.');
                    this.hideDownloadModal();
                }
            }

            async simulateDownloadProgress() {
                const progressBar = document.getElementById('downloadProgress');
                const statusText = document.getElementById('downloadStatus');
                
                const messages = [
                    'Initializing download...',
                    'Connecting to server...',
                    'Preparing file...',
                    'Starting download...',
                    'Download in progress...',
                    'Almost complete...',
                    'Finalizing...'
                ];

                for (let i = 0; i < messages.length; i++) {
                    statusText.textContent = messages[i];
                    progressBar.style.width = `${((i + 1) / messages.length) * 100}%`;
                    await new Promise(resolve => setTimeout(resolve, 500));
                }
            }

            showLoading() {
                document.getElementById('loadingSpinner').classList.remove('hidden');
            }

            hideLoading() {
                document.getElementById('loadingSpinner').classList.add('hidden');
            }

            showResults() {
                document.getElementById('results').classList.remove('hidden');
            }

            hideResults() {
                document.getElementById('results').classList.add('hidden');
            }

            showDownloadModal(format) {
                document.getElementById('downloadModal').classList.remove('hidden');
            }

            hideDownloadModal() {
                document.getElementById('downloadModal').classList.add('hidden');
            }

            showError(message) {
                document.getElementById('errorMessage').textContent = message;
                document.getElementById('errorModal').classList.remove('hidden');
            }

            hideError() {
                document.getElementById('errorModal').classList.add('hidden');
            }

            showSuccess(message) {
                // For demo purposes, just show in console
                console.log('Success:', message);
            }

            initParticles() {
                const canvas = document.getElementById('particleCanvas');
                const particleSystem = new ParticleSystem(canvas);
                particleSystem.init();
            }

            addInteractiveEffects() {
                // Add ripple effect to buttons
                document.querySelectorAll('button').forEach(button => {
                    button.addEventListener('click', function(e) {
                        const ripple = document.createElement('span');
                        const rect = this.getBoundingClientRect();
                        const size = Math.max(rect.width, rect.height);
                        const x = e.clientX - rect.left - size / 2;
                        const y = e.clientY - rect.top - size / 2;
                        
                        ripple.style.width = ripple.style.height = size + 'px';
                        ripple.style.left = x + 'px';
                        ripple.style.top = y + 'px';
                        ripple.classList.add('ripple');
                        
                        this.appendChild(ripple);
                        setTimeout(() => ripple.remove(), 600);
                    });
                });

                // Add typing animation to input
                const input = document.getElementById('videoUrl');
                const placeholder = input.placeholder;
                input.placeholder = '';
                
                let i = 0;
                const typeWriter = () => {
                    if (i < placeholder.length) {
                        input.placeholder += placeholder.charAt(i);
                        i++;
                        setTimeout(typeWriter, 100);
                    }
                };
                
                setTimeout(typeWriter, 1000);
            }
        }

        // Initialize the application
        document.addEventListener('DOMContentLoaded', () => {
            new VideoDownloader();
        });
    </script>
</body>
</html>
